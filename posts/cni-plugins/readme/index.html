<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>CNI plugins and kindnet | AK</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="generator" content="Hugo 0.70.0" />
    
    
      <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    

    
    
      <link href="/dist/css/app.1cb140d8ba31d5b2f1114537dd04802a.css" rel="stylesheet">
    

    
      <link rel="stylesheet" href="/css/custom.css">
    

    
      
    

    
    
    <meta property="og:title" content="CNI plugins and kindnet" />
<meta property="og:description" content="Walkthrough of CNI plugins, IPs and routing created by kindnet" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://thefind.live/posts/cni-plugins/readme/" />
<meta property="article:published_time" content="2021-08-28T00:00:00+00:00" />
<meta property="article:modified_time" content="2021-08-28T00:00:00+00:00" />
<meta itemprop="name" content="CNI plugins and kindnet">
<meta itemprop="description" content="Walkthrough of CNI plugins, IPs and routing created by kindnet">
<meta itemprop="datePublished" content="2021-08-28T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2021-08-28T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="1605">



<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="CNI plugins and kindnet"/>
<meta name="twitter:description" content="Walkthrough of CNI plugins, IPs and routing created by kindnet"/>

  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="http://thefind.live/" class="f3 fw2 hover-white no-underline white-90 dib">
      AK
    </a>
    <div class="flex-l items-center">
      

      

      




<a href="https://twitter.com/ak_ndb" target="_blank" class="link-transition twitter link dib z-999 pt3 pt0-l mr1" title="Twitter link" rel="noopener" aria-label="follow on Twitter——Opens in a new window">
  <svg height="32px"  style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167,22.283c-2.619,0.953-4.274,3.411-4.086,6.101  l0.063,1.038l-1.048-0.127c-3.813-0.487-7.145-2.139-9.974-4.915l-1.383-1.377l-0.356,1.017c-0.754,2.267-0.272,4.661,1.299,6.271  c0.838,0.89,0.649,1.017-0.796,0.487c-0.503-0.169-0.943-0.296-0.985-0.233c-0.146,0.149,0.356,2.076,0.754,2.839  c0.545,1.06,1.655,2.097,2.871,2.712l1.027,0.487l-1.215,0.021c-1.173,0-1.215,0.021-1.089,0.467  c0.419,1.377,2.074,2.839,3.918,3.475l1.299,0.444l-1.131,0.678c-1.676,0.976-3.646,1.526-5.616,1.568  C19.775,43.256,19,43.341,19,43.405c0,0.211,2.557,1.397,4.044,1.864c4.463,1.377,9.765,0.783,13.746-1.568  c2.829-1.673,5.657-5,6.978-8.221c0.713-1.716,1.425-4.851,1.425-6.354c0-0.975,0.063-1.102,1.236-2.267  c0.692-0.678,1.341-1.419,1.467-1.631c0.21-0.403,0.188-0.403-0.88-0.043c-1.781,0.636-2.033,0.551-1.152-0.402  c0.649-0.678,1.425-1.907,1.425-2.267c0-0.063-0.314,0.042-0.671,0.233c-0.377,0.212-1.215,0.53-1.844,0.72l-1.131,0.361l-1.027-0.7  c-0.566-0.381-1.361-0.805-1.781-0.932C39.766,21.902,38.131,21.944,37.167,22.283z M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4  s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/></svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>




<a href="https://www.linkedin.com/in/amim/" target="_blank" class="link-transition linkedin link dib z-999 pt3 pt0-l mr1" title="LinkedIn link" rel="noopener" aria-label="follow on LinkedIn——Opens in a new window">
  <svg  height="32px"  style="enable-background:new 0 0 65 65;" version="1.1" viewBox="0 0 65 65" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <path d="M50.837,48.137V36.425c0-6.275-3.35-9.195-7.816-9.195  c-3.604,0-5.219,1.983-6.119,3.374V27.71h-6.79c0.09,1.917,0,20.427,0,20.427h6.79V36.729c0-0.609,0.044-1.219,0.224-1.655  c0.49-1.22,1.607-2.483,3.482-2.483c2.458,0,3.44,1.873,3.44,4.618v10.929H50.837z M22.959,24.922c2.367,0,3.842-1.57,3.842-3.531  c-0.044-2.003-1.475-3.528-3.797-3.528s-3.841,1.524-3.841,3.528c0,1.961,1.474,3.531,3.753,3.531H22.959z M34,64  C17.432,64,4,50.568,4,34C4,17.431,17.432,4,34,4s30,13.431,30,30C64,50.568,50.568,64,34,64z M26.354,48.137V27.71h-6.789v20.427  H26.354z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>


<a href="https://github.com/knabben/" target="_blank" class="link-transition github link dib z-999 pt3 pt0-l mr1" title="Github link" rel="noopener" aria-label="follow on Github——Opens in a new window">
  <svg  height="32px"  style="enable-background:new 0 0 512 512;" version="1.1" viewBox="0 0 512 512" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
  <path d="M256,32C132.3,32,32,134.8,32,261.7c0,101.5,64.2,187.5,153.2,217.9c11.2,2.1,15.3-5,15.3-11.1   c0-5.5-0.2-19.9-0.3-39.1c-62.3,13.9-75.5-30.8-75.5-30.8c-10.2-26.5-24.9-33.6-24.9-33.6c-20.3-14.3,1.5-14,1.5-14   c22.5,1.6,34.3,23.7,34.3,23.7c20,35.1,52.4,25,65.2,19.1c2-14.8,7.8-25,14.2-30.7c-49.7-5.8-102-25.5-102-113.5   c0-25.1,8.7-45.6,23-61.6c-2.3-5.8-10-29.2,2.2-60.8c0,0,18.8-6.2,61.6,23.5c17.9-5.1,37-7.6,56.1-7.7c19,0.1,38.2,2.6,56.1,7.7   c42.8-29.7,61.5-23.5,61.5-23.5c12.2,31.6,4.5,55,2.2,60.8c14.3,16.1,23,36.6,23,61.6c0,88.2-52.4,107.6-102.3,113.3   c8,7.1,15.2,21.1,15.2,42.5c0,30.7-0.3,55.5-0.3,63c0,6.1,4,13.3,15.4,11C415.9,449.1,480,363.1,480,261.7   C480,134.8,379.7,32,256,32z"/>
</svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>







    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked">
          
        POSTS
      </aside>
      




  <div id="sharing" class="mt3">

    
    <a href="https://www.facebook.com/sharer.php?u=http://thefind.live/posts/cni-plugins/readme/" class="facebook no-underline" aria-label="share on Facebook">
      <svg height="32px"  style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M28.765,50.32h6.744V33.998h4.499l0.596-5.624h-5.095  l0.007-2.816c0-1.466,0.14-2.253,2.244-2.253h2.812V17.68h-4.5c-5.405,0-7.307,2.729-7.307,7.317v3.377h-3.369v5.625h3.369V50.32z   M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;"/></svg>

    </a>

    
    
    <a href="https://twitter.com/share?url=http://thefind.live/posts/cni-plugins/readme/&amp;text=CNI%20plugins%20and%20kindnet" class="twitter no-underline" aria-label="share on Twitter">
      <svg height="32px"  style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167,22.283c-2.619,0.953-4.274,3.411-4.086,6.101  l0.063,1.038l-1.048-0.127c-3.813-0.487-7.145-2.139-9.974-4.915l-1.383-1.377l-0.356,1.017c-0.754,2.267-0.272,4.661,1.299,6.271  c0.838,0.89,0.649,1.017-0.796,0.487c-0.503-0.169-0.943-0.296-0.985-0.233c-0.146,0.149,0.356,2.076,0.754,2.839  c0.545,1.06,1.655,2.097,2.871,2.712l1.027,0.487l-1.215,0.021c-1.173,0-1.215,0.021-1.089,0.467  c0.419,1.377,2.074,2.839,3.918,3.475l1.299,0.444l-1.131,0.678c-1.676,0.976-3.646,1.526-5.616,1.568  C19.775,43.256,19,43.341,19,43.405c0,0.211,2.557,1.397,4.044,1.864c4.463,1.377,9.765,0.783,13.746-1.568  c2.829-1.673,5.657-5,6.978-8.221c0.713-1.716,1.425-4.851,1.425-6.354c0-0.975,0.063-1.102,1.236-2.267  c0.692-0.678,1.341-1.419,1.467-1.631c0.21-0.403,0.188-0.403-0.88-0.043c-1.781,0.636-2.033,0.551-1.152-0.402  c0.649-0.678,1.425-1.907,1.425-2.267c0-0.063-0.314,0.042-0.671,0.233c-0.377,0.212-1.215,0.53-1.844,0.72l-1.131,0.361l-1.027-0.7  c-0.566-0.381-1.361-0.805-1.781-0.932C39.766,21.902,38.131,21.944,37.167,22.283z M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4  s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/></svg>

    </a>

    
    <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=http://thefind.live/posts/cni-plugins/readme/&amp;title=CNI%20plugins%20and%20kindnet" class="linkedin no-underline" aria-label="share on LinkedIn">
      <svg  height="32px"  style="enable-background:new 0 0 65 65;" version="1.1" viewBox="0 0 65 65" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <path d="M50.837,48.137V36.425c0-6.275-3.35-9.195-7.816-9.195  c-3.604,0-5.219,1.983-6.119,3.374V27.71h-6.79c0.09,1.917,0,20.427,0,20.427h6.79V36.729c0-0.609,0.044-1.219,0.224-1.655  c0.49-1.22,1.607-2.483,3.482-2.483c2.458,0,3.44,1.873,3.44,4.618v10.929H50.837z M22.959,24.922c2.367,0,3.842-1.57,3.842-3.531  c-0.044-2.003-1.475-3.528-3.797-3.528s-3.841,1.524-3.841,3.528c0,1.961,1.474,3.531,3.753,3.531H22.959z M34,64  C17.432,64,4,50.568,4,34C4,17.431,17.432,4,34,4s30,13.431,30,30C64,50.568,50.568,64,34,64z M26.354,48.137V27.71h-6.789v20.427  H26.354z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>

    </a>
  </div>

      <h1 class="f1 athelas mt3 mb1">CNI plugins and kindnet</h1>
      
      
      <time class="f6 mv4 dib tracked" datetime="2021-08-28T00:00:00Z">August 28, 2021</time>

      
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l"><h2 id="introduction">Introduction</h2>

<p>With the advance of Containers, the network segmentation was required at level of the isolated applications,
logically  it's another copy of the network stack, with it's own routes, firewall rules and net devices.
By convention these named network namespaces (ns) is an object at  /var/run/netns/<name> as we are going
to see in the sequence. A few tools to manage netns at user-space level resides on [1].</p>

<p>A standard called CNI (Container Network Interface) was created, to formalize and create a baseline that
consists of a specification and libraries for writing plugins to configure network interfaces in Linux containers,
along with a number of supported plugins. CNI concerns itself only with network connectivity of containers and
removing allocated resources when the container is deleted. Because of this focus, CNI has a wide
range of support and the specification is simple to implement.</p>

<p>In the post will be examined Kindnet the CNI implementation of Kind [3] with the goal to understand the
main flows and show a few tools to debug it.</p>

<h2 id="network-namespace">Network namespace</h2>

<p>This blog post resumes pretty well the concept used on network namespace. [4]</p>

<p>Generally speaking, an installation of Linux shares a single set of network interfaces and routing table entries.
...
With network namespaces, you can have different and separate instances of network interfaces and routing
tables that operate independent of each other.</p>

<p>So, based on [5], we can have a sequence of commands to create a two network namespace called <code>ns1</code> and <code>ns2</code>
for illustation propose. Create a virtual ethernet PAIR (veth), think of this as a ethernet cable between
the host machine and the namespace application. Important to note that to link ALL namespaces we need
a new device called BRIDGE, this device has an IP and work as a new gateway.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#75715e"># Create two namespaces: ns1 and ns2</span>
$ ip netns add ns1
$ ip netns add ns2

<span style="color:#75715e"># Create the veth pairs for namespace and for host</span> 
$ ip link add veth10 type veth peer name veth11  <span style="color:#75715e"># host -&gt; ns1</span>
$ ip link add veth20 type veth peer name veth21  <span style="color:#75715e"># host -&gt; ns2</span>

<span style="color:#75715e"># Add the veth pairs to the namespaces</span>
$ ip link set veth11 netns ns1
$ ip link set veth21 netns ns2

<span style="color:#75715e"># Configure the interfaces in the network namespaces with IP address</span>
$ ip netns exec ns1 ip addr add 172.16.0.2/24 dev veth11  <span style="color:#75715e"># add ip addr on ns1</span>
$ ip netns exec ns2 ip addr add 172.16.0.3/24 dev veth21  <span style="color:#75715e"># add ip addr on ns2</span>

<span style="color:#75715e"># Enabling the interfaces inside the network namespaces</span>
$ ip netns exec ns1 ip link set dev veth11 up
$ ip netns exec ns2 ip link set dev veth21 up

<span style="color:#75715e"># Create the bridge</span>
$ ip link add name br0 type bridge

<span style="color:#75715e"># Add the network namespaces interfaces to the bridge</span>
$ ip link set dev veth10 master br0
$ ip link set dev veth20 master br0

<span style="color:#75715e"># Assigning the IP address to the bridge</span>
$ ip addr add 172.16.0.1/24 dev br0

<span style="color:#75715e"># Enabling the bridge and interfaces connected to the bridge</span>
$ ip link set dev br0 up
$ ip link set dev veth10 up
$ ip link set dev veth20 up

<span style="color:#75715e"># &#34;Setting the loopback interfaces in the network namespaces&#34;</span>
$ ip netns exec ns1 ip link set lo up
$ ip netns exec ns2 ip link set lo up

<span style="color:#75715e"># Setting the default route in the network namespaces via bridge IP</span>
$ ip netns exec ns1 ip route add default via 172.16.0.1 dev veth11
$ ip netns exec ns2 ip route add default via 172.16.0.1 dev veth21</code></pre></div>
<p>It's possible to test connectivity between the hosts with <code>ip netns exec ns1 ping -c 1 172.16.0.3</code></p>

<h2 id="kindnet">Kindnet</h2>

<p>Now there's a better understand on how it's setup behind the scenes, this is an example
diagram of a default kind setup installation. The CNI main responsability is to automatize
this network container life cycle, executing a list of CNI plugins pre-registered, the
ADD/DELETE/CHECK commands are available for each plugin.</p>

<img src="/posts/cni-plugins/scheme1.png" alt="" class="" style="width: 100%; ">


<p>This is totally configurable via a sequence of plugins but must follow the actual
specification format to be parseable by the CRI runtime.</p>

<h3 id="cni-plugins-and-routing">CNI plugins and routing</h3>

<p>As we can see in the image, for Kind a simplistic approach is used with only 3 plugins
and no bridge is involved. Seeing the configuration example for the <code>kind-worker</code>,
the explanation of the plugins will come in the next session:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">root@kind-worker:/# cat /etc/cni/net.d/10-kindnet.conflist
<span style="color:#f92672">{</span>
	<span style="color:#e6db74">&#34;cniVersion&#34;</span>: <span style="color:#e6db74">&#34;0.3.1&#34;</span>,
	<span style="color:#e6db74">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;kindnet&#34;</span>,
	<span style="color:#e6db74">&#34;plugins&#34;</span>: <span style="color:#f92672">[</span>
	<span style="color:#f92672">{</span>
		<span style="color:#e6db74">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;ptp&#34;</span>,
		<span style="color:#e6db74">&#34;ipMasq&#34;</span>: false,
		<span style="color:#e6db74">&#34;ipam&#34;</span>: <span style="color:#f92672">{</span>
			<span style="color:#e6db74">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;host-local&#34;</span>,
			<span style="color:#e6db74">&#34;dataDir&#34;</span>: <span style="color:#e6db74">&#34;/run/cni-ipam-state&#34;</span>,
			<span style="color:#e6db74">&#34;routes&#34;</span>: <span style="color:#f92672">[</span>
				<span style="color:#f92672">{</span> <span style="color:#e6db74">&#34;dst&#34;</span>: <span style="color:#e6db74">&#34;0.0.0.0/0&#34;</span> <span style="color:#f92672">}</span>
			<span style="color:#f92672">]</span>,
			<span style="color:#e6db74">&#34;ranges&#34;</span>: <span style="color:#f92672">[</span>
				<span style="color:#f92672">[</span> <span style="color:#f92672">{</span> <span style="color:#e6db74">&#34;subnet&#34;</span>: <span style="color:#e6db74">&#34;10.244.2.0/24&#34;</span> <span style="color:#f92672">}</span> <span style="color:#f92672">]</span>
			<span style="color:#f92672">]</span>
		<span style="color:#f92672">}</span>
		,
		<span style="color:#e6db74">&#34;mtu&#34;</span>: <span style="color:#ae81ff">1500</span>

	<span style="color:#f92672">}</span>,
	<span style="color:#f92672">{</span>
		<span style="color:#e6db74">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;portmap&#34;</span>,
		<span style="color:#e6db74">&#34;capabilities&#34;</span>: <span style="color:#f92672">{</span>
			<span style="color:#e6db74">&#34;portMappings&#34;</span>: true
		<span style="color:#f92672">}</span>
	<span style="color:#f92672">}</span>
	<span style="color:#f92672">]</span>
<span style="color:#f92672">}</span></code></pre></div>
<p>For now note that a new container brings it's pair of virtual interfaces and routing entries with the
namespace IP are configured as part of the CNI setup. Another interesting route here is the CIDR using the
other node as gateway.</p>

<p>Basically Kindnet reconcile the nodes at each 10 seconds, for the local node it dumps the configuration
below, otherwise it adds the CIDR routes as cited if it's not present.</p>

<h4 id="ptp--point-to-point-6">PTP - Point To Point [6]</h4>

<p>The ptp plugin creates a point-to-point link between a container and the host by using a veth device.
One end of the veth pair is placed inside a container and the other end resides on the host.
The host-local IPAM plugin can be used to allocate an IP address to the container.
The traffic of the container interface will be routed through the interface of the host.</p>

<p>In the ADD command of PTP plugin we have the following sequence of events:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-golang" data-lang="golang"><span style="color:#75715e">// run the IPAM plugin and get back the config to apply
</span><span style="color:#75715e"></span><span style="color:#a6e22e">r</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">ipam</span>.<span style="color:#a6e22e">ExecAdd</span>(<span style="color:#a6e22e">conf</span>.<span style="color:#a6e22e">IPAM</span>.<span style="color:#a6e22e">Type</span>, <span style="color:#a6e22e">args</span>.<span style="color:#a6e22e">StdinData</span>)</code></pre></div>
<p>IPAM (IP Address Management) loads the <code>host-local</code> [7]</p>

<p>Host-local IPAM allocates IPv4 and IPv6 addresses out of a specified address range.
Optionally, it can include a DNS configuration from a resolv.conf file on the host. It allocates ip
addresses out of a set of address ranges and it stores the state locally on the host filesystem,
therefore ensuring uniqueness of IP addresses on a single host.</p>

<p>After allocating the IP via IPAM host-local, ptp will enable ip forward for the IP version and:</p>

<ol>
<li>setupContainerVeth</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-golang" data-lang="golang"><span style="color:#a6e22e">hostVeth</span>, <span style="color:#a6e22e">contVeth0</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">ip</span>.<span style="color:#a6e22e">SetupVeth</span>(<span style="color:#a6e22e">ifName</span>, <span style="color:#a6e22e">mtu</span>, <span style="color:#e6db74">&#34;&#34;</span>, <span style="color:#a6e22e">hostNS</span>)
<span style="color:#f92672">...</span>
<span style="color:#a6e22e">contVeth</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">net</span>.<span style="color:#a6e22e">InterfaceByName</span>(<span style="color:#a6e22e">ifName</span>)

<span style="color:#75715e">// clean default route and add the local routing to the container in the ns
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">r</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> []<span style="color:#a6e22e">netlink</span>.<span style="color:#a6e22e">Route</span>{
    {
      <span style="color:#a6e22e">LinkIndex</span>: <span style="color:#a6e22e">contVeth</span>.<span style="color:#a6e22e">Index</span>,
      <span style="color:#a6e22e">Dst</span>: <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">net</span>.<span style="color:#a6e22e">IPNet</span>{
        <span style="color:#a6e22e">IP</span>:   <span style="color:#a6e22e">ipc</span>.<span style="color:#a6e22e">Gateway</span>,
        <span style="color:#a6e22e">Mask</span>: <span style="color:#a6e22e">net</span>.<span style="color:#a6e22e">CIDRMask</span>(<span style="color:#a6e22e">addrBits</span>, <span style="color:#a6e22e">addrBits</span>),
      },
      <span style="color:#a6e22e">Scope</span>: <span style="color:#a6e22e">netlink</span>.<span style="color:#a6e22e">SCOPE_LINK</span>,
      <span style="color:#a6e22e">Src</span>:   <span style="color:#a6e22e">ipc</span>.<span style="color:#a6e22e">Address</span>.<span style="color:#a6e22e">IP</span>,
    },
    {
      <span style="color:#a6e22e">LinkIndex</span>: <span style="color:#a6e22e">contVeth</span>.<span style="color:#a6e22e">Index</span>,
      <span style="color:#a6e22e">Dst</span>: <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">net</span>.<span style="color:#a6e22e">IPNet</span>{
        <span style="color:#a6e22e">IP</span>:   <span style="color:#a6e22e">ipc</span>.<span style="color:#a6e22e">Address</span>.<span style="color:#a6e22e">IP</span>.<span style="color:#a6e22e">Mask</span>(<span style="color:#a6e22e">ipc</span>.<span style="color:#a6e22e">Address</span>.<span style="color:#a6e22e">Mask</span>),
        <span style="color:#a6e22e">Mask</span>: <span style="color:#a6e22e">ipc</span>.<span style="color:#a6e22e">Address</span>.<span style="color:#a6e22e">Mask</span>,
      },
      <span style="color:#a6e22e">Scope</span>: <span style="color:#a6e22e">netlink</span>.<span style="color:#a6e22e">SCOPE_UNIVERSE</span>,
      <span style="color:#a6e22e">Gw</span>:    <span style="color:#a6e22e">ipc</span>.<span style="color:#a6e22e">Gateway</span>,
      <span style="color:#a6e22e">Src</span>:   <span style="color:#a6e22e">ipc</span>.<span style="color:#a6e22e">Address</span>.<span style="color:#a6e22e">IP</span>,
    },
  } {
    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">netlink</span>.<span style="color:#a6e22e">RouteAdd</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">r</span>); <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
      <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Errorf</span>(<span style="color:#e6db74">&#34;failed to add route %v: %v&#34;</span>, <span style="color:#a6e22e">r</span>, <span style="color:#a6e22e">err</span>)
    }
  }
}</code></pre></div>
<ol start="2">
<li>setupHostVeth - set the address to the veth pair of the host:</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-golang" data-lang="golang"><span style="color:#a6e22e">veth</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">netlink</span>.<span style="color:#a6e22e">LinkByName</span>(<span style="color:#a6e22e">vethName</span>)
<span style="color:#a6e22e">ipn</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">net</span>.<span style="color:#a6e22e">IPNet</span>{
  <span style="color:#a6e22e">IP</span>:   <span style="color:#a6e22e">ipc</span>.<span style="color:#a6e22e">Gateway</span>,
  <span style="color:#a6e22e">Mask</span>: <span style="color:#a6e22e">net</span>.<span style="color:#a6e22e">CIDRMask</span>(<span style="color:#a6e22e">maskLen</span>, <span style="color:#a6e22e">maskLen</span>),
}
<span style="color:#a6e22e">addr</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">netlink</span>.<span style="color:#a6e22e">Addr</span>{<span style="color:#a6e22e">IPNet</span>: <span style="color:#a6e22e">ipn</span>, <span style="color:#a6e22e">Label</span>: <span style="color:#e6db74">&#34;&#34;</span>}
<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> = <span style="color:#a6e22e">netlink</span>.<span style="color:#a6e22e">AddrAdd</span>(<span style="color:#a6e22e">veth</span>, <span style="color:#a6e22e">addr</span>); <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Errorf</span>(<span style="color:#e6db74">&#34;failed to add IP addr (%#v) to veth: %v&#34;</span>, <span style="color:#a6e22e">ipn</span>, <span style="color:#a6e22e">err</span>)
}
<span style="color:#f92672">...</span>
<span style="color:#a6e22e">ipn</span> = <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">net</span>.<span style="color:#a6e22e">IPNet</span>{
  <span style="color:#a6e22e">IP</span>:   <span style="color:#a6e22e">ipc</span>.<span style="color:#a6e22e">Address</span>.<span style="color:#a6e22e">IP</span>,
  <span style="color:#a6e22e">Mask</span>: <span style="color:#a6e22e">net</span>.<span style="color:#a6e22e">CIDRMask</span>(<span style="color:#a6e22e">maskLen</span>, <span style="color:#a6e22e">maskLen</span>),
}
<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> = <span style="color:#a6e22e">ip</span>.<span style="color:#a6e22e">AddHostRoute</span>(<span style="color:#a6e22e">ipn</span>, <span style="color:#66d9ef">nil</span>, <span style="color:#a6e22e">veth</span>); <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> <span style="color:#f92672">&amp;&amp;</span> !<span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">IsExist</span>(<span style="color:#a6e22e">err</span>)<span style="color:#f92672">...</span></code></pre></div>
<ol start="3">
<li>dnsConfSet to overwrite DNS settings</li>
</ol>

<h4 id="portmap">Portmap</h4>

<p>This is a post-setup plugin that establishes port forwarding - using iptables,
from the host's network interface(s) to a pod's network interface.</p>

<p>It is intended to be used as a chained CNI plugin, and determines the container
IP from the previous result. If the result includes an IPv6 address, it will
also be configured. (IPTables will not forward cross-family).</p>

<h3 id="containerd-cri-and-cni">Containerd CRI and CNI</h3>

<p>The network plugin is now setup in the container runtime via the CRI,
so the ADD/DELETE happens when a new container is bring to life or is killed.</p>

<p>As detailed in the official architecture diagram of Containerd, you can see
the CNI as part of this process, the configuration and binaries are mounted by the CNI
that must exist in the same node.</p>

<img src="/posts/cni-plugins/containerd.png" alt="" class="" style="width: 80%; ">


<p>On dockershim, this responsability existed on Kubelet in the past, it's not true anymore
with deprecation of the dockershim and remote CRI configuration.</p>

<h3 id="debugging-with-cnitool">Debugging with CNITool</h3>

<p>To finalize lets use cnitool [8] to debug the CNI configuration, in this example a new network
namespace <code>nstest</code> is created, and we add the kindnet into the namespace.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">root@kind-worker2:/# cnitool
cnitool: Add, check, or remove network interfaces from a network namespace
  cnitool add   &lt;net&gt; &lt;netns&gt;
  cnitool check &lt;net&gt; &lt;netns&gt;
  cnitool del   &lt;net&gt; &lt;netns&gt;
root@kind-worker2:/# ip netns add nstest
root@kind-worker2:/# ls /var/run/netns/
cni-5e28f5d1-3a6d-9f79-8708-da18aff121c3  cni-d58e75e1-060b-4476-aa3e-89c3d2c00742  nstest
root@kind-worker2:/# CNI_PATH<span style="color:#f92672">=</span>/opt/cni/bin cnitool add kindnet /var/run/netns/nstest
<span style="color:#f92672">{</span>
    <span style="color:#e6db74">&#34;cniVersion&#34;</span>: <span style="color:#e6db74">&#34;0.3.1&#34;</span>,
    <span style="color:#e6db74">&#34;interfaces&#34;</span>: <span style="color:#f92672">[</span>
        <span style="color:#f92672">{</span>
            <span style="color:#e6db74">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;veth93960e3a&#34;</span>,
            <span style="color:#e6db74">&#34;mac&#34;</span>: <span style="color:#e6db74">&#34;b2:d7:0a:52:e5:b7&#34;</span>
        <span style="color:#f92672">}</span>,
        <span style="color:#f92672">{</span>
            <span style="color:#e6db74">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;eth0&#34;</span>,
            <span style="color:#e6db74">&#34;mac&#34;</span>: <span style="color:#e6db74">&#34;0e:83:a9:f9:5d:2c&#34;</span>,
            <span style="color:#e6db74">&#34;sandbox&#34;</span>: <span style="color:#e6db74">&#34;/var/run/netns/nstest&#34;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">]</span>,
    <span style="color:#e6db74">&#34;ips&#34;</span>: <span style="color:#f92672">[</span>
        <span style="color:#f92672">{</span>
            <span style="color:#e6db74">&#34;version&#34;</span>: <span style="color:#e6db74">&#34;4&#34;</span>,
            <span style="color:#e6db74">&#34;interface&#34;</span>: 1,
            <span style="color:#e6db74">&#34;address&#34;</span>: <span style="color:#e6db74">&#34;10.244.1.7/24&#34;</span>,
            <span style="color:#e6db74">&#34;gateway&#34;</span>: <span style="color:#e6db74">&#34;10.244.1.1&#34;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">]</span>,
    <span style="color:#e6db74">&#34;routes&#34;</span>: <span style="color:#f92672">[</span>
        <span style="color:#f92672">{</span>
            <span style="color:#e6db74">&#34;dst&#34;</span>: <span style="color:#e6db74">&#34;0.0.0.0/0&#34;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">]</span>,
    <span style="color:#e6db74">&#34;dns&#34;</span>: <span style="color:#f92672">{}</span></code></pre></div>
<p>As noted in the example a new veth was created with the proper routing, we can test a traceroute to a
 <code>kind-worker</code> container from the <code>nstest</code> with something like:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">root@kind-worker2:/# ip netns exec nstest traceroute 10.244.2.2
traceroute to 10.244.2.2 <span style="color:#f92672">(</span>10.244.2.2<span style="color:#f92672">)</span>, <span style="color:#ae81ff">30</span> hops max, <span style="color:#ae81ff">60</span> byte packets
 <span style="color:#ae81ff">1</span>  10.244.1.1 <span style="color:#f92672">(</span>10.244.1.1<span style="color:#f92672">)</span>  0.025 ms  0.006 ms *
 <span style="color:#ae81ff">2</span>  kind-worker.kind <span style="color:#f92672">(</span>172.18.0.3<span style="color:#f92672">)</span>  0.045 ms  0.019 ms *
 <span style="color:#ae81ff">3</span>  10.244.2.2 <span style="color:#f92672">(</span>10.244.2.2<span style="color:#f92672">)</span>  0.027 ms * *

root@kind-worker:/# tshark -i veth8dae5680  <span style="color:#75715e"># from a regular ping</span>
<span style="color:#ae81ff">25</span> 12.362370462   10.244.1.7 ? 10.244.2.2   ICMP <span style="color:#ae81ff">98</span> Echo <span style="color:#f92672">(</span>ping<span style="color:#f92672">)</span> request  id<span style="color:#f92672">=</span>0x576e, seq<span style="color:#f92672">=</span>5/1280, ttl<span style="color:#f92672">=</span><span style="color:#ae81ff">62</span>
<span style="color:#ae81ff">26</span> 12.362400792   10.244.2.2 ? 10.244.1.7   ICMP <span style="color:#ae81ff">98</span> Echo <span style="color:#f92672">(</span>ping<span style="color:#f92672">)</span> reply    id<span style="color:#f92672">=</span>0x576e, seq<span style="color:#f92672">=</span>5/1280, ttl<span style="color:#f92672">=</span><span style="color:#ae81ff">64</span> <span style="color:#f92672">(</span>request in 25<span style="color:#f92672">)</span></code></pre></div>
<h2 id="references">References</h2>

<p>[1] <a href="https://man7.org/linux/man-pages/man8/ip-netns.8.html">https://man7.org/linux/man-pages/man8/ip-netns.8.html</a></p>

<p>[2] <a href="https://www.cni.dev/">https://www.cni.dev/</a></p>

<p>[3] <a href="https://kind.sigs.k8s.io/">https://kind.sigs.k8s.io/</a></p>

<p>[4] <a href="https://blog.scottlowe.org/2013/09/04/introducing-linux-network-namespaces/">https://blog.scottlowe.org/2013/09/04/introducing-linux-network-namespaces/</a></p>

<p>[5] <a href="https://github.com/kristenjacobs/container-networking/tree/master/1-network-namespace">https://github.com/kristenjacobs/container-networking/tree/master/1-network-namespace</a></p>

<p>[6] <a href="https://www.cni.dev/plugins/current/main/ptp/">https://www.cni.dev/plugins/current/main/ptp/</a></p>

<p>[7] <a href="https://www.cni.dev/plugins/current/ipam/host-local/">https://www.cni.dev/plugins/current/ipam/host-local/</a></p>

<p>[8] <a href="https://www.cni.dev/docs/cnitool/">https://www.cni.dev/docs/cnitool/</a></p>
<ul class="pa0">
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l">




</aside>

  </article>

    </main>
    <script type="text/javascript" async
        src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
 MathJax.Hub.Config({
   tex2jax: {
     inlineMath: [['$','$'], ['\\(','\\)']],
     displayMath: [['$$','$$']],
     processEscapes: true,
     processEnvironments: true,
     skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
     TeX: { equationNumbers: { autoNumber: "AMS" },
            extensions: ["AMSmath.js", "AMSsymbols.js"] }
   }
 });
 MathJax.Hub.Queue(function() {
   
   
   
   var all = MathJax.Hub.getAllJax(), i;
   for(i = 0; i < all.length; i += 1) {
     all[i].SourceElement().parentNode.className += ' has-jax';
   }
 });

 MathJax.Hub.Config({
   
   TeX: { equationNumbers: { autoNumber: "AMS" } }
 });
</script>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-46699622-2', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


<footer class="bg-near-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="http://thefind.live/" >
    &copy; 2021 - Amim Knabben
  </a>
    <div>




<a href="https://twitter.com/ak_ndb" target="_blank" class="link-transition twitter link dib z-999 pt3 pt0-l mr1" title="Twitter link" rel="noopener" aria-label="follow on Twitter——Opens in a new window">
  <svg height="32px"  style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167,22.283c-2.619,0.953-4.274,3.411-4.086,6.101  l0.063,1.038l-1.048-0.127c-3.813-0.487-7.145-2.139-9.974-4.915l-1.383-1.377l-0.356,1.017c-0.754,2.267-0.272,4.661,1.299,6.271  c0.838,0.89,0.649,1.017-0.796,0.487c-0.503-0.169-0.943-0.296-0.985-0.233c-0.146,0.149,0.356,2.076,0.754,2.839  c0.545,1.06,1.655,2.097,2.871,2.712l1.027,0.487l-1.215,0.021c-1.173,0-1.215,0.021-1.089,0.467  c0.419,1.377,2.074,2.839,3.918,3.475l1.299,0.444l-1.131,0.678c-1.676,0.976-3.646,1.526-5.616,1.568  C19.775,43.256,19,43.341,19,43.405c0,0.211,2.557,1.397,4.044,1.864c4.463,1.377,9.765,0.783,13.746-1.568  c2.829-1.673,5.657-5,6.978-8.221c0.713-1.716,1.425-4.851,1.425-6.354c0-0.975,0.063-1.102,1.236-2.267  c0.692-0.678,1.341-1.419,1.467-1.631c0.21-0.403,0.188-0.403-0.88-0.043c-1.781,0.636-2.033,0.551-1.152-0.402  c0.649-0.678,1.425-1.907,1.425-2.267c0-0.063-0.314,0.042-0.671,0.233c-0.377,0.212-1.215,0.53-1.844,0.72l-1.131,0.361l-1.027-0.7  c-0.566-0.381-1.361-0.805-1.781-0.932C39.766,21.902,38.131,21.944,37.167,22.283z M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4  s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/></svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>




<a href="https://www.linkedin.com/in/amim/" target="_blank" class="link-transition linkedin link dib z-999 pt3 pt0-l mr1" title="LinkedIn link" rel="noopener" aria-label="follow on LinkedIn——Opens in a new window">
  <svg  height="32px"  style="enable-background:new 0 0 65 65;" version="1.1" viewBox="0 0 65 65" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <path d="M50.837,48.137V36.425c0-6.275-3.35-9.195-7.816-9.195  c-3.604,0-5.219,1.983-6.119,3.374V27.71h-6.79c0.09,1.917,0,20.427,0,20.427h6.79V36.729c0-0.609,0.044-1.219,0.224-1.655  c0.49-1.22,1.607-2.483,3.482-2.483c2.458,0,3.44,1.873,3.44,4.618v10.929H50.837z M22.959,24.922c2.367,0,3.842-1.57,3.842-3.531  c-0.044-2.003-1.475-3.528-3.797-3.528s-3.841,1.524-3.841,3.528c0,1.961,1.474,3.531,3.753,3.531H22.959z M34,64  C17.432,64,4,50.568,4,34C4,17.431,17.432,4,34,4s30,13.431,30,30C64,50.568,50.568,64,34,64z M26.354,48.137V27.71h-6.789v20.427  H26.354z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>


<a href="https://github.com/knabben/" target="_blank" class="link-transition github link dib z-999 pt3 pt0-l mr1" title="Github link" rel="noopener" aria-label="follow on Github——Opens in a new window">
  <svg  height="32px"  style="enable-background:new 0 0 512 512;" version="1.1" viewBox="0 0 512 512" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
  <path d="M256,32C132.3,32,32,134.8,32,261.7c0,101.5,64.2,187.5,153.2,217.9c11.2,2.1,15.3-5,15.3-11.1   c0-5.5-0.2-19.9-0.3-39.1c-62.3,13.9-75.5-30.8-75.5-30.8c-10.2-26.5-24.9-33.6-24.9-33.6c-20.3-14.3,1.5-14,1.5-14   c22.5,1.6,34.3,23.7,34.3,23.7c20,35.1,52.4,25,65.2,19.1c2-14.8,7.8-25,14.2-30.7c-49.7-5.8-102-25.5-102-113.5   c0-25.1,8.7-45.6,23-61.6c-2.3-5.8-10-29.2,2.2-60.8c0,0,18.8-6.2,61.6,23.5c17.9-5.1,37-7.6,56.1-7.7c19,0.1,38.2,2.6,56.1,7.7   c42.8-29.7,61.5-23.5,61.5-23.5c12.2,31.6,4.5,55,2.2,60.8c14.3,16.1,23,36.6,23,61.6c0,88.2-52.4,107.6-102.3,113.3   c8,7.1,15.2,21.1,15.2,42.5c0,30.7-0.3,55.5-0.3,63c0,6.1,4,13.3,15.4,11C415.9,449.1,480,363.1,480,261.7   C480,134.8,379.7,32,256,32z"/>
</svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>






</div>
  </div>
</footer>

    

  <script src="/dist/js/app.3fc0f988d21662902933.js"></script>


  </body>
</html>
