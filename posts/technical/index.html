<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Technical indicators | AK</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="generator" content="Hugo 0.70.0" />
    
    
      <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    

    
    
      <link href="/dist/css/app.1cb140d8ba31d5b2f1114537dd04802a.css" rel="stylesheet">
    

    
      <link rel="stylesheet" href="/css/custom.css">
    

    
      
    

    
    
    <meta property="og:title" content="Technical indicators" />
<meta property="og:description" content="Introduction   According to investopedia - are mathematical calculations based on the price, volume, or open interest of a security or contract. So by analyzing historical data, technical analysts use indicators to predict the future price movements.  The idea of this post is to show up how to calculate the most common one using the so famous SciPy stack, this is far from being an advising in this field, but a playground and notes about the research." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://knabben.github.io/posts/technical/" />
<meta property="article:published_time" content="2018-03-25T00:00:00+00:00" />
<meta property="article:modified_time" content="2018-03-25T00:00:00+00:00" />
<meta itemprop="name" content="Technical indicators">
<meta itemprop="description" content="Introduction   According to investopedia - are mathematical calculations based on the price, volume, or open interest of a security or contract. So by analyzing historical data, technical analysts use indicators to predict the future price movements.  The idea of this post is to show up how to calculate the most common one using the so famous SciPy stack, this is far from being an advising in this field, but a playground and notes about the research.">
<meta itemprop="datePublished" content="2018-03-25T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2018-03-25T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="778">



<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Technical indicators"/>
<meta name="twitter:description" content="Introduction   According to investopedia - are mathematical calculations based on the price, volume, or open interest of a security or contract. So by analyzing historical data, technical analysts use indicators to predict the future price movements.  The idea of this post is to show up how to calculate the most common one using the so famous SciPy stack, this is far from being an advising in this field, but a playground and notes about the research."/>

  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="http://knabben.github.io/" class="f3 fw2 hover-white no-underline white-90 dib">
      AK
    </a>
    <div class="flex-l items-center">
      

      
      














    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked">
          
        POSTS
      </aside>
      




  <div id="sharing" class="mt3">

    
    <a href="https://www.facebook.com/sharer.php?u=http://knabben.github.io/posts/technical/" class="facebook no-underline" aria-label="share on Facebook">
      <svg height="32px"  style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M28.765,50.32h6.744V33.998h4.499l0.596-5.624h-5.095  l0.007-2.816c0-1.466,0.14-2.253,2.244-2.253h2.812V17.68h-4.5c-5.405,0-7.307,2.729-7.307,7.317v3.377h-3.369v5.625h3.369V50.32z   M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;"/></svg>

    </a>

    
    
    <a href="https://twitter.com/share?url=http://knabben.github.io/posts/technical/&amp;text=Technical%20indicators" class="twitter no-underline" aria-label="share on Twitter">
      <svg height="32px"  style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167,22.283c-2.619,0.953-4.274,3.411-4.086,6.101  l0.063,1.038l-1.048-0.127c-3.813-0.487-7.145-2.139-9.974-4.915l-1.383-1.377l-0.356,1.017c-0.754,2.267-0.272,4.661,1.299,6.271  c0.838,0.89,0.649,1.017-0.796,0.487c-0.503-0.169-0.943-0.296-0.985-0.233c-0.146,0.149,0.356,2.076,0.754,2.839  c0.545,1.06,1.655,2.097,2.871,2.712l1.027,0.487l-1.215,0.021c-1.173,0-1.215,0.021-1.089,0.467  c0.419,1.377,2.074,2.839,3.918,3.475l1.299,0.444l-1.131,0.678c-1.676,0.976-3.646,1.526-5.616,1.568  C19.775,43.256,19,43.341,19,43.405c0,0.211,2.557,1.397,4.044,1.864c4.463,1.377,9.765,0.783,13.746-1.568  c2.829-1.673,5.657-5,6.978-8.221c0.713-1.716,1.425-4.851,1.425-6.354c0-0.975,0.063-1.102,1.236-2.267  c0.692-0.678,1.341-1.419,1.467-1.631c0.21-0.403,0.188-0.403-0.88-0.043c-1.781,0.636-2.033,0.551-1.152-0.402  c0.649-0.678,1.425-1.907,1.425-2.267c0-0.063-0.314,0.042-0.671,0.233c-0.377,0.212-1.215,0.53-1.844,0.72l-1.131,0.361l-1.027-0.7  c-0.566-0.381-1.361-0.805-1.781-0.932C39.766,21.902,38.131,21.944,37.167,22.283z M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4  s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/></svg>

    </a>

    
    <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=http://knabben.github.io/posts/technical/&amp;title=Technical%20indicators" class="linkedin no-underline" aria-label="share on LinkedIn">
      <svg  height="32px"  style="enable-background:new 0 0 65 65;" version="1.1" viewBox="0 0 65 65" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <path d="M50.837,48.137V36.425c0-6.275-3.35-9.195-7.816-9.195  c-3.604,0-5.219,1.983-6.119,3.374V27.71h-6.79c0.09,1.917,0,20.427,0,20.427h6.79V36.729c0-0.609,0.044-1.219,0.224-1.655  c0.49-1.22,1.607-2.483,3.482-2.483c2.458,0,3.44,1.873,3.44,4.618v10.929H50.837z M22.959,24.922c2.367,0,3.842-1.57,3.842-3.531  c-0.044-2.003-1.475-3.528-3.797-3.528s-3.841,1.524-3.841,3.528c0,1.961,1.474,3.531,3.753,3.531H22.959z M34,64  C17.432,64,4,50.568,4,34C4,17.431,17.432,4,34,4s30,13.431,30,30C64,50.568,50.568,64,34,64z M26.354,48.137V27.71h-6.789v20.427  H26.354z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>

    </a>
  </div>

      <h1 class="f1 athelas mt3 mb1">Technical indicators</h1>
      
      
      <time class="f6 mv4 dib tracked" datetime="2018-03-25T00:00:00Z">March 25, 2018</time>

      
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l">
<h3 id="headline-1">
Introduction
</h3>
<p>
According to investopedia - are mathematical calculations based on the price, volume, or open interest of a security or contract. So by analyzing historical data, technical analysts use indicators to predict the future price movements.
</p>
<p>
The idea of this post is to show up how to calculate the most common one using the so famous SciPy stack, this is far from being an advising in this field, but a playground and notes about the research.
</p>
<p>
The data is extracted from Yahoo finance, for this following example we are going to use Bovespa ABEV3.
</p>
<p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">%</span>matplotlib inline

<span style="color:#f92672">import</span> numpy <span style="color:#f92672">as</span> np
<span style="color:#f92672">import</span> pandas <span style="color:#f92672">as</span> pd
<span style="color:#f92672">import</span> seaborn <span style="color:#f92672">as</span> sns
sns<span style="color:#f92672">.</span>set()

data <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>read_csv(<span style="color:#e6db74">&#39;ABEV3.SA.csv&#39;</span>)<span style="color:#f92672">.</span>dropna()
data <span style="color:#f92672">=</span> data<span style="color:#f92672">.</span>set_index(data[<span style="color:#e6db74">&#39;Date&#39;</span>]<span style="color:#f92672">.</span>apply(<span style="color:#66d9ef">lambda</span> x: datetime<span style="color:#f92672">.</span>datetime<span style="color:#f92672">.</span>strptime(x, <span style="color:#e6db74">&#39;%Y-%m-</span><span style="color:#e6db74">%d</span><span style="color:#e6db74">&#39;</span>)), drop<span style="color:#f92672">=</span>True)

data[<span style="color:#e6db74">&#39;Close&#39;</span>]<span style="color:#f92672">.</span>describe()
data[<span style="color:#e6db74">&#39;Close&#39;</span>]<span style="color:#f92672">.</span>plot()</code></pre></div>
</p>
<p>
<img src="price.png" alt="price.png" title="price.png" />
</p>
<h3 id="headline-2">
Moving average
</h3>
<p>
In the context of stock it can be used as a late trend indicator, basically shows the average value of a security&#39;s price over a period of time. When calculating a moving average, a mathematical analysis of the security&#39;s average value over a predetermined time period is made.
</p>
<h3 id="headline-3">
Simple Moving Average
</h3>
<p>
For this one the average moves and changes each day as the oldest value is dropped out of the calculation and new day&#39;s value added in.
Lets add 2, 3 and 5 days average for a 10 samples.
</p>
<p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">rolling <span style="color:#f92672">=</span> <span style="color:#ae81ff">5</span>
df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>read_csv(<span style="color:#e6db74">&#39;stock_px_2.csv&#39;</span>, parse_dates<span style="color:#f92672">=</span>True, index_col<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>)
test_data <span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>iloc[:<span style="color:#ae81ff">10</span>][ [<span style="color:#e6db74">&#39;AAPL&#39;</span>] ]

test_data[<span style="color:#e6db74">&#39;AAPL_SMA2&#39;</span>] <span style="color:#f92672">=</span> test_data[<span style="color:#e6db74">&#39;AAPL&#39;</span>]<span style="color:#f92672">.</span>rolling(<span style="color:#ae81ff">2</span>)<span style="color:#f92672">.</span>mean()
test_data[<span style="color:#e6db74">&#39;AAPL_SMA3&#39;</span>] <span style="color:#f92672">=</span> test_data[<span style="color:#e6db74">&#39;AAPL&#39;</span>]<span style="color:#f92672">.</span>rolling(<span style="color:#ae81ff">3</span>)<span style="color:#f92672">.</span>mean()
test_data[<span style="color:#e6db74">&#39;AAPL_SMA5&#39;</span>] <span style="color:#f92672">=</span> test_data[<span style="color:#e6db74">&#39;AAPL&#39;</span>]<span style="color:#f92672">.</span>rolling(<span style="color:#ae81ff">5</span>)<span style="color:#f92672">.</span>mean()

            AAPL  AAPL_SMA2  AAPL_SMA3  AAPL_SMA5  AAPL_EWM1
<span style="color:#ae81ff">2003</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span><span style="color:#f92672">-</span><span style="color:#ae81ff">02</span>  <span style="color:#ae81ff">7.40</span>        NaN        NaN        NaN   <span style="color:#ae81ff">7.400000</span>
<span style="color:#ae81ff">2003</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span><span style="color:#f92672">-</span><span style="color:#ae81ff">03</span>  <span style="color:#ae81ff">7.45</span>      <span style="color:#ae81ff">7.425</span>        NaN        NaN   <span style="color:#ae81ff">7.430000</span>
<span style="color:#ae81ff">2003</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span><span style="color:#f92672">-</span><span style="color:#ae81ff">06</span>  <span style="color:#ae81ff">7.45</span>      <span style="color:#ae81ff">7.450</span>   <span style="color:#ae81ff">7.433333</span>        NaN   <span style="color:#ae81ff">7.439474</span>
<span style="color:#ae81ff">2003</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span><span style="color:#f92672">-</span><span style="color:#ae81ff">07</span>  <span style="color:#ae81ff">7.43</span>      <span style="color:#ae81ff">7.440</span>   <span style="color:#ae81ff">7.443333</span>        NaN   <span style="color:#ae81ff">7.435538</span>
<span style="color:#ae81ff">2003</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span><span style="color:#f92672">-</span><span style="color:#ae81ff">08</span>  <span style="color:#ae81ff">7.28</span>      <span style="color:#ae81ff">7.355</span>   <span style="color:#ae81ff">7.386667</span>      <span style="color:#ae81ff">7.402</span>   <span style="color:#ae81ff">7.375829</span>
<span style="color:#ae81ff">2003</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span><span style="color:#f92672">-</span><span style="color:#ae81ff">09</span>  <span style="color:#ae81ff">7.34</span>      <span style="color:#ae81ff">7.310</span>   <span style="color:#ae81ff">7.350000</span>      <span style="color:#ae81ff">7.390</span>   <span style="color:#ae81ff">7.362737</span>
<span style="color:#ae81ff">2003</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span>  <span style="color:#ae81ff">7.36</span>      <span style="color:#ae81ff">7.350</span>   <span style="color:#ae81ff">7.326667</span>      <span style="color:#ae81ff">7.372</span>   <span style="color:#ae81ff">7.361768</span>
<span style="color:#ae81ff">2003</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span><span style="color:#f92672">-</span><span style="color:#ae81ff">13</span>  <span style="color:#ae81ff">7.32</span>      <span style="color:#ae81ff">7.340</span>   <span style="color:#ae81ff">7.340000</span>      <span style="color:#ae81ff">7.346</span>   <span style="color:#ae81ff">7.347280</span>
<span style="color:#ae81ff">2003</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span>  <span style="color:#ae81ff">7.30</span>      <span style="color:#ae81ff">7.310</span>   <span style="color:#ae81ff">7.326667</span>      <span style="color:#ae81ff">7.320</span>   <span style="color:#ae81ff">7.331099</span>
<span style="color:#ae81ff">2003</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span><span style="color:#f92672">-</span><span style="color:#ae81ff">15</span>  <span style="color:#ae81ff">7.22</span>      <span style="color:#ae81ff">7.260</span>   <span style="color:#ae81ff">7.280000</span>      <span style="color:#ae81ff">7.308</span>   <span style="color:#ae81ff">7.293412</span>

<span style="color:#75715e"># Backtest for the 5 days moving average</span>

<span style="color:#66d9ef">for</span> n <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">0</span>, rolling <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>):
    data <span style="color:#f92672">=</span> test_data[<span style="color:#e6db74">&#39;AAPL&#39;</span>]<span style="color:#f92672">.</span>iloc[n <span style="color:#f92672">+</span> <span style="color:#ae81ff">0</span>:n <span style="color:#f92672">+</span> <span style="color:#ae81ff">5</span>]
    <span style="color:#66d9ef">print</span>(data, data<span style="color:#f92672">.</span>mean())

    <span style="color:#ae81ff">2003</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span><span style="color:#f92672">-</span><span style="color:#ae81ff">02</span>    <span style="color:#ae81ff">7.40</span>
    <span style="color:#ae81ff">2003</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span><span style="color:#f92672">-</span><span style="color:#ae81ff">03</span>    <span style="color:#ae81ff">7.45</span>
    <span style="color:#ae81ff">2003</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span><span style="color:#f92672">-</span><span style="color:#ae81ff">06</span>    <span style="color:#ae81ff">7.45</span>
    <span style="color:#ae81ff">2003</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span><span style="color:#f92672">-</span><span style="color:#ae81ff">07</span>    <span style="color:#ae81ff">7.43</span>
    <span style="color:#ae81ff">2003</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span><span style="color:#f92672">-</span><span style="color:#ae81ff">08</span>    <span style="color:#ae81ff">7.28</span>
    Name: AAPL, dtype: float64 <span style="color:#ae81ff">7.401999999999999</span>
    <span style="color:#ae81ff">2003</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span><span style="color:#f92672">-</span><span style="color:#ae81ff">03</span>    <span style="color:#ae81ff">7.45</span>
    <span style="color:#ae81ff">2003</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span><span style="color:#f92672">-</span><span style="color:#ae81ff">06</span>    <span style="color:#ae81ff">7.45</span>
    <span style="color:#ae81ff">2003</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span><span style="color:#f92672">-</span><span style="color:#ae81ff">07</span>    <span style="color:#ae81ff">7.43</span>
    <span style="color:#ae81ff">2003</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span><span style="color:#f92672">-</span><span style="color:#ae81ff">08</span>    <span style="color:#ae81ff">7.28</span>
    <span style="color:#ae81ff">2003</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span><span style="color:#f92672">-</span><span style="color:#ae81ff">09</span>    <span style="color:#ae81ff">7.34</span>
    Name: AAPL, dtype: float64 <span style="color:#ae81ff">7.390000000000001</span>
    <span style="color:#ae81ff">2003</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span><span style="color:#f92672">-</span><span style="color:#ae81ff">06</span>    <span style="color:#ae81ff">7.45</span>
    <span style="color:#ae81ff">2003</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span><span style="color:#f92672">-</span><span style="color:#ae81ff">07</span>    <span style="color:#ae81ff">7.43</span>
    <span style="color:#ae81ff">2003</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span><span style="color:#f92672">-</span><span style="color:#ae81ff">08</span>    <span style="color:#ae81ff">7.28</span>
    <span style="color:#ae81ff">2003</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span><span style="color:#f92672">-</span><span style="color:#ae81ff">09</span>    <span style="color:#ae81ff">7.34</span>
    <span style="color:#ae81ff">2003</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span>    <span style="color:#ae81ff">7.36</span>
    Name: AAPL, dtype: float64 <span style="color:#ae81ff">7.372</span>
    <span style="color:#ae81ff">2003</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span><span style="color:#f92672">-</span><span style="color:#ae81ff">07</span>    <span style="color:#ae81ff">7.43</span>
    <span style="color:#ae81ff">2003</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span><span style="color:#f92672">-</span><span style="color:#ae81ff">08</span>    <span style="color:#ae81ff">7.28</span>
    <span style="color:#ae81ff">2003</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span><span style="color:#f92672">-</span><span style="color:#ae81ff">09</span>    <span style="color:#ae81ff">7.34</span>
    <span style="color:#ae81ff">2003</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span>    <span style="color:#ae81ff">7.36</span>
    <span style="color:#ae81ff">2003</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span><span style="color:#f92672">-</span><span style="color:#ae81ff">13</span>    <span style="color:#ae81ff">7.32</span>
    Name: AAPL, dtype: float64 <span style="color:#ae81ff">7.346000000000001</span>
    <span style="color:#ae81ff">2003</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span><span style="color:#f92672">-</span><span style="color:#ae81ff">08</span>    <span style="color:#ae81ff">7.28</span>
    <span style="color:#ae81ff">2003</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span><span style="color:#f92672">-</span><span style="color:#ae81ff">09</span>    <span style="color:#ae81ff">7.34</span>
    <span style="color:#ae81ff">2003</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span>    <span style="color:#ae81ff">7.36</span>
    <span style="color:#ae81ff">2003</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span><span style="color:#f92672">-</span><span style="color:#ae81ff">13</span>    <span style="color:#ae81ff">7.32</span>
    <span style="color:#ae81ff">2003</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span>    <span style="color:#ae81ff">7.30</span>
    Name: AAPL, dtype: float64 <span style="color:#ae81ff">7.32</span>
    <span style="color:#ae81ff">2003</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span><span style="color:#f92672">-</span><span style="color:#ae81ff">09</span>    <span style="color:#ae81ff">7.34</span>
    <span style="color:#ae81ff">2003</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span>    <span style="color:#ae81ff">7.36</span>
    <span style="color:#ae81ff">2003</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span><span style="color:#f92672">-</span><span style="color:#ae81ff">13</span>    <span style="color:#ae81ff">7.32</span>
    <span style="color:#ae81ff">2003</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span>    <span style="color:#ae81ff">7.30</span>
    <span style="color:#ae81ff">2003</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span><span style="color:#f92672">-</span><span style="color:#ae81ff">15</span>    <span style="color:#ae81ff">7.22</span>
    Name: AAPL, dtype: float64 <span style="color:#ae81ff">7.308</span>

test_data<span style="color:#f92672">.</span>plot(color<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;#F00000&#39;</span>, <span style="color:#e6db74">&#39;#0000FF&#39;</span>, <span style="color:#e6db74">&#39;#0000FF&#39;</span>, <span style="color:#e6db74">&#39;#0000FF&#39;</span>])</code></pre></div>
</p>
<p>
<img src="moving.png" alt="moving.png" title="moving.png" />
</p>
<h3 id="headline-4">
Exponentially Weighted Moving Average
</h3>
<p>
This moving average has the advantage of giving the most weight to the most current value. Here you need to specify a decay factor the give weight to more recent observations. The exponent is calculated with Exp = 2/Period + 1, for this case we have Exp = 2/5+1 = 0.34
</p>
<p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">test_data[<span style="color:#e6db74">&#39;AAPL_EWM1&#39;</span>] <span style="color:#f92672">=</span> test_data[<span style="color:#e6db74">&#39;AAPL&#39;</span>]<span style="color:#f92672">.</span>ewm(span<span style="color:#f92672">=</span><span style="color:#ae81ff">5</span>)<span style="color:#f92672">.</span>mean()
<span style="color:#66d9ef">print</span>(test_data[[<span style="color:#e6db74">&#39;AAPL&#39;</span>,<span style="color:#e6db74">&#39;AAPL_EWM1&#39;</span>]])

                AAPL  AAPL_EWM1
    <span style="color:#ae81ff">2003</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span><span style="color:#f92672">-</span><span style="color:#ae81ff">02</span>  <span style="color:#ae81ff">7.40</span>   <span style="color:#ae81ff">7.400000</span>
    <span style="color:#ae81ff">2003</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span><span style="color:#f92672">-</span><span style="color:#ae81ff">03</span>  <span style="color:#ae81ff">7.45</span>   <span style="color:#ae81ff">7.430000</span>
    <span style="color:#ae81ff">2003</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span><span style="color:#f92672">-</span><span style="color:#ae81ff">06</span>  <span style="color:#ae81ff">7.45</span>   <span style="color:#ae81ff">7.439474</span>
    <span style="color:#ae81ff">2003</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span><span style="color:#f92672">-</span><span style="color:#ae81ff">07</span>  <span style="color:#ae81ff">7.43</span>   <span style="color:#ae81ff">7.435538</span>
    <span style="color:#ae81ff">2003</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span><span style="color:#f92672">-</span><span style="color:#ae81ff">08</span>  <span style="color:#ae81ff">7.28</span>   <span style="color:#ae81ff">7.375829</span>
    <span style="color:#ae81ff">2003</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span><span style="color:#f92672">-</span><span style="color:#ae81ff">09</span>  <span style="color:#ae81ff">7.34</span>   <span style="color:#ae81ff">7.362737</span>
    <span style="color:#ae81ff">2003</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span>  <span style="color:#ae81ff">7.36</span>   <span style="color:#ae81ff">7.361768</span>
    <span style="color:#ae81ff">2003</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span><span style="color:#f92672">-</span><span style="color:#ae81ff">13</span>  <span style="color:#ae81ff">7.32</span>   <span style="color:#ae81ff">7.347280</span>
    <span style="color:#ae81ff">2003</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span>  <span style="color:#ae81ff">7.30</span>   <span style="color:#ae81ff">7.331099</span>
    <span style="color:#ae81ff">2003</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span><span style="color:#f92672">-</span><span style="color:#ae81ff">15</span>  <span style="color:#ae81ff">7.22</span>   <span style="color:#ae81ff">7.293412</span>

test_data[[<span style="color:#e6db74">&#39;AAPL&#39;</span>,<span style="color:#e6db74">&#39;AAPL_EWM1&#39;</span>]]<span style="color:#f92672">.</span>plot()</code></pre></div>
</p>
<p>
<img src="ewma.png" alt="ewma.png" title="ewma.png" />
</p>
<h3 id="headline-5">
Bollinger Bands 
</h3>
<p>
The actual prices tends to oscilate around the mean average, this variation of the price creates an envelope or a range that the price can flutuate. For a period of more volatility the lines spread, the default values are a mean of 20 periods and 2 points for std.
</p>
<p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">data_2017 <span style="color:#f92672">=</span> data<span style="color:#f92672">.</span>loc[<span style="color:#e6db74">&#39;2017-01-01&#39;</span>:]<span style="color:#f92672">.</span>copy()

data_2017[<span style="color:#e6db74">&#39;SMA1&#39;</span>] <span style="color:#f92672">=</span> data[<span style="color:#e6db74">&#39;Close&#39;</span>]<span style="color:#f92672">.</span>rolling(<span style="color:#ae81ff">20</span>)<span style="color:#f92672">.</span>mean()
data_2017[<span style="color:#e6db74">&#39;STD1&#39;</span>] <span style="color:#f92672">=</span> data[<span style="color:#e6db74">&#39;Close&#39;</span>]<span style="color:#f92672">.</span>rolling(<span style="color:#ae81ff">20</span>)<span style="color:#f92672">.</span>std()

data_2017[<span style="color:#e6db74">&#39;BB_LOWER&#39;</span>] <span style="color:#f92672">=</span> data_2017[<span style="color:#e6db74">&#39;SMA1&#39;</span>] <span style="color:#f92672">+</span> (<span style="color:#ae81ff">2</span> <span style="color:#f92672">*</span> data_2017[<span style="color:#e6db74">&#39;STD1&#39;</span>])
data_2017[<span style="color:#e6db74">&#39;BB_UPPER&#39;</span>] <span style="color:#f92672">=</span> data_2017[<span style="color:#e6db74">&#39;SMA1&#39;</span>] <span style="color:#f92672">-</span> (<span style="color:#ae81ff">2</span> <span style="color:#f92672">*</span> data_2017[<span style="color:#e6db74">&#39;STD1&#39;</span>])
data_2017[ [<span style="color:#e6db74">&#39;Close&#39;</span>, <span style="color:#e6db74">&#39;SMA1&#39;</span>, <span style="color:#e6db74">&#39;BB_LOWER&#39;</span>, <span style="color:#e6db74">&#39;BB_UPPER&#39;</span>] ]<span style="color:#f92672">.</span>plot(
    figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">20</span>, <span style="color:#ae81ff">7</span>), 
    color<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;#000000&#39;</span>, <span style="color:#e6db74">&#39;#0000FF&#39;</span>, <span style="color:#e6db74">&#39;#FF0000&#39;</span>, <span style="color:#e6db74">&#39;#FF0000&#39;</span>])</code></pre></div>
</p>
<p>
<img src="bollinger.png" alt="bollinger.png" title="bollinger.png" />
</p>
<h3 id="headline-6">
Basic strategy
</h3>
<p>
A very simple strategy to buy/sell is to use two different cross period means, a longer and a shorter one. When the short mean cross the longest is buy signal, the opposite indicates a sell.
</p>
<p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">data_2017 <span style="color:#f92672">=</span> data<span style="color:#f92672">.</span>loc[<span style="color:#e6db74">&#39;2017-01-01&#39;</span>:]<span style="color:#f92672">.</span>copy()

data_2017[<span style="color:#e6db74">&#39;SMA1&#39;</span>] <span style="color:#f92672">=</span> data[<span style="color:#e6db74">&#39;Close&#39;</span>]<span style="color:#f92672">.</span>rolling(<span style="color:#ae81ff">30</span>)<span style="color:#f92672">.</span>mean()
data_2017[<span style="color:#e6db74">&#39;SMA2&#39;</span>] <span style="color:#f92672">=</span> data[<span style="color:#e6db74">&#39;Close&#39;</span>]<span style="color:#f92672">.</span>rolling(<span style="color:#ae81ff">60</span>)<span style="color:#f92672">.</span>mean()

data_2017[<span style="color:#e6db74">&#39;SIGNAL&#39;</span>] <span style="color:#f92672">=</span> data_2017<span style="color:#f92672">.</span>apply(<span style="color:#66d9ef">lambda</span> x: <span style="color:#ae81ff">1</span> <span style="color:#66d9ef">if</span> x[<span style="color:#e6db74">&#39;SMA1&#39;</span>] <span style="color:#f92672">&gt;</span> x[<span style="color:#e6db74">&#39;SMA2&#39;</span>] <span style="color:#66d9ef">else</span> None, axis<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)

data_2017[[<span style="color:#e6db74">&#39;Close&#39;</span>, <span style="color:#e6db74">&#39;SMA1&#39;</span>, <span style="color:#e6db74">&#39;SMA2&#39;</span>, <span style="color:#e6db74">&#39;SIGNAL&#39;</span>]]<span style="color:#f92672">.</span>plot(secondary_y<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;SIGNAL&#39;</span>, figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">20</span>,<span style="color:#ae81ff">8</span>))</code></pre></div>
</p>
<p>
<img src="strategy.png" alt="strategy.png" title="strategy.png" />
</p>
<h3 id="headline-7">
Keltner channels and EWM
</h3>
<p>
For the Keltner channels we have 3 lines, the upper band expressed by Exponential moving average (EMA) + (ATR * mult), middle band = EMA and Lower band = EMA - (ATR x mult), being the multiplier 2 and an EMA of 30. These envolopes are a good way to do things like stop loss or short sell.
</p>
<p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">data_2017 <span style="color:#f92672">=</span> data<span style="color:#f92672">.</span>loc[<span style="color:#e6db74">&#39;2017-01-01&#39;</span>:]<span style="color:#f92672">.</span>copy()

data_2017[<span style="color:#e6db74">&#39;AR&#39;</span>] <span style="color:#f92672">=</span> (data_2017[<span style="color:#e6db74">&#39;High&#39;</span>] <span style="color:#f92672">+</span> data_2017[<span style="color:#e6db74">&#39;Low&#39;</span>] <span style="color:#f92672">+</span> data_2017[<span style="color:#e6db74">&#39;Close&#39;</span>]) <span style="color:#f92672">/</span> <span style="color:#ae81ff">3</span>
data_2017[<span style="color:#e6db74">&#39;MINMAX&#39;</span>] <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">*</span> (data_2017[<span style="color:#e6db74">&#39;High&#39;</span>] <span style="color:#f92672">-</span> data_2017[<span style="color:#e6db74">&#39;Low&#39;</span>])<span style="color:#f92672">.</span>ewm(span<span style="color:#f92672">=</span><span style="color:#ae81ff">30</span>, adjust<span style="color:#f92672">=</span>False)<span style="color:#f92672">.</span>mean()

data_2017[<span style="color:#e6db74">&#39;K_MIDDLE&#39;</span>] <span style="color:#f92672">=</span> data_2017[<span style="color:#e6db74">&#39;AR&#39;</span>]<span style="color:#f92672">.</span>ewm(span<span style="color:#f92672">=</span><span style="color:#ae81ff">30</span>, adjust<span style="color:#f92672">=</span>False)<span style="color:#f92672">.</span>mean()
data_2017[<span style="color:#e6db74">&#39;K_UPPER&#39;</span>] <span style="color:#f92672">=</span> data_2017[<span style="color:#e6db74">&#39;K_MIDDLE&#39;</span>] <span style="color:#f92672">+</span> data_2017[<span style="color:#e6db74">&#39;MINMAX&#39;</span>]
data_2017[<span style="color:#e6db74">&#39;K_LOWER&#39;</span>] <span style="color:#f92672">=</span> data_2017[<span style="color:#e6db74">&#39;K_MIDDLE&#39;</span>] <span style="color:#f92672">-</span> data_2017[<span style="color:#e6db74">&#39;MINMAX&#39;</span>]


data_2017[[<span style="color:#e6db74">&#39;Close&#39;</span>, <span style="color:#e6db74">&#39;K_MIDDLE&#39;</span>, <span style="color:#e6db74">&#39;K_UPPER&#39;</span>, <span style="color:#e6db74">&#39;K_LOWER&#39;</span>]]<span style="color:#f92672">.</span>plot(
    figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">20</span>,<span style="color:#ae81ff">8</span>),
    color<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;#000000&#39;</span>, <span style="color:#e6db74">&#39;#0000FF&#39;</span>, <span style="color:#e6db74">&#39;#FF0000&#39;</span>, <span style="color:#e6db74">&#39;#FF0000&#39;</span>])</code></pre></div>
</p>
<p>
<img src="keltner.png" alt="keltner.png" title="keltner.png" />
</p>
<h3 id="headline-8">
Bibliography
</h3>
<h6 id="headline-9">
[1] Clif Droke, Moving Averages Simplified
</h6>
<h6 id="headline-10">
[2] Lemos, Flavio. Análise Técnica dos Mercados Financeiros
</h6>
<ul class="pa0">
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l">




</aside>

  </article>

    </main>
    <script type="text/javascript" async
        src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
 MathJax.Hub.Config({
   tex2jax: {
     inlineMath: [['$','$'], ['\\(','\\)']],
     displayMath: [['$$','$$']],
     processEscapes: true,
     processEnvironments: true,
     skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
     TeX: { equationNumbers: { autoNumber: "AMS" },
            extensions: ["AMSmath.js", "AMSsymbols.js"] }
   }
 });
 MathJax.Hub.Queue(function() {
   
   
   
   var all = MathJax.Hub.getAllJax(), i;
   for(i = 0; i < all.length; i += 1) {
     all[i].SourceElement().parentNode.className += ' has-jax';
   }
 });

 MathJax.Hub.Config({
   
   TeX: { equationNumbers: { autoNumber: "AMS" } }
 });
</script>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-46699622-2', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


<footer class="bg-near-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="http://knabben.github.io/" >
    &copy; 2020 AK
  </a>
    <div>













</div>
  </div>
</footer>

    

  <script src="/dist/js/app.3fc0f988d21662902933.js"></script>


  </body>
</html>
