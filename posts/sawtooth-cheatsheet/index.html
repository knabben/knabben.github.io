<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Sawtooth Cheatsheet | AK</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="generator" content="Hugo 0.70.0" />
    
    
      <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    

    
    
      <link href="/dist/css/app.1cb140d8ba31d5b2f1114537dd04802a.css" rel="stylesheet">
    

    
      <link rel="stylesheet" href="/css/custom.css">
    

    
      
    

    
    
    <meta property="og:title" content="Sawtooth Cheatsheet" />
<meta property="og:description" content="Installation  Ubuntu   For local ubuntu Installation is being used Ubuntu Xenial - 16.04 LTS, via vagrant  $ vagrant init ubuntu/xenial64 $ vagrant up  After the box is up we need to add the correct repository:  $ sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv-keys 8AA7AF1F1091A5FD $ sudo add-apt-repository &#39;deb http://repo.sawtooth.me/ubuntu/1.0/stable xenial universe&#39; $ sudo apt update  Install the package:  $ sudo apt install -y sawtooth Docker   Install Docker adding key and repo:  $ curl -fsSL https://download." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://knabben.github.io/posts/sawtooth-cheatsheet/" />
<meta property="article:published_time" content="2019-12-15T00:00:00+00:00" />
<meta property="article:modified_time" content="2019-12-15T00:00:00+00:00" />
<meta itemprop="name" content="Sawtooth Cheatsheet">
<meta itemprop="description" content="Installation  Ubuntu   For local ubuntu Installation is being used Ubuntu Xenial - 16.04 LTS, via vagrant  $ vagrant init ubuntu/xenial64 $ vagrant up  After the box is up we need to add the correct repository:  $ sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv-keys 8AA7AF1F1091A5FD $ sudo add-apt-repository &#39;deb http://repo.sawtooth.me/ubuntu/1.0/stable xenial universe&#39; $ sudo apt update  Install the package:  $ sudo apt install -y sawtooth Docker   Install Docker adding key and repo:  $ curl -fsSL https://download.">
<meta itemprop="datePublished" content="2019-12-15T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2019-12-15T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="814">



<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Sawtooth Cheatsheet"/>
<meta name="twitter:description" content="Installation  Ubuntu   For local ubuntu Installation is being used Ubuntu Xenial - 16.04 LTS, via vagrant  $ vagrant init ubuntu/xenial64 $ vagrant up  After the box is up we need to add the correct repository:  $ sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv-keys 8AA7AF1F1091A5FD $ sudo add-apt-repository &#39;deb http://repo.sawtooth.me/ubuntu/1.0/stable xenial universe&#39; $ sudo apt update  Install the package:  $ sudo apt install -y sawtooth Docker   Install Docker adding key and repo:  $ curl -fsSL https://download."/>

  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="http://knabben.github.io/" class="f3 fw2 hover-white no-underline white-90 dib">
      AK
    </a>
    <div class="flex-l items-center">
      

      
      














    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked">
          
        POSTS
      </aside>
      




  <div id="sharing" class="mt3">

    
    <a href="https://www.facebook.com/sharer.php?u=http://knabben.github.io/posts/sawtooth-cheatsheet/" class="facebook no-underline" aria-label="share on Facebook">
      <svg height="32px"  style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M28.765,50.32h6.744V33.998h4.499l0.596-5.624h-5.095  l0.007-2.816c0-1.466,0.14-2.253,2.244-2.253h2.812V17.68h-4.5c-5.405,0-7.307,2.729-7.307,7.317v3.377h-3.369v5.625h3.369V50.32z   M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;"/></svg>

    </a>

    
    
    <a href="https://twitter.com/share?url=http://knabben.github.io/posts/sawtooth-cheatsheet/&amp;text=Sawtooth%20Cheatsheet" class="twitter no-underline" aria-label="share on Twitter">
      <svg height="32px"  style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167,22.283c-2.619,0.953-4.274,3.411-4.086,6.101  l0.063,1.038l-1.048-0.127c-3.813-0.487-7.145-2.139-9.974-4.915l-1.383-1.377l-0.356,1.017c-0.754,2.267-0.272,4.661,1.299,6.271  c0.838,0.89,0.649,1.017-0.796,0.487c-0.503-0.169-0.943-0.296-0.985-0.233c-0.146,0.149,0.356,2.076,0.754,2.839  c0.545,1.06,1.655,2.097,2.871,2.712l1.027,0.487l-1.215,0.021c-1.173,0-1.215,0.021-1.089,0.467  c0.419,1.377,2.074,2.839,3.918,3.475l1.299,0.444l-1.131,0.678c-1.676,0.976-3.646,1.526-5.616,1.568  C19.775,43.256,19,43.341,19,43.405c0,0.211,2.557,1.397,4.044,1.864c4.463,1.377,9.765,0.783,13.746-1.568  c2.829-1.673,5.657-5,6.978-8.221c0.713-1.716,1.425-4.851,1.425-6.354c0-0.975,0.063-1.102,1.236-2.267  c0.692-0.678,1.341-1.419,1.467-1.631c0.21-0.403,0.188-0.403-0.88-0.043c-1.781,0.636-2.033,0.551-1.152-0.402  c0.649-0.678,1.425-1.907,1.425-2.267c0-0.063-0.314,0.042-0.671,0.233c-0.377,0.212-1.215,0.53-1.844,0.72l-1.131,0.361l-1.027-0.7  c-0.566-0.381-1.361-0.805-1.781-0.932C39.766,21.902,38.131,21.944,37.167,22.283z M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4  s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/></svg>

    </a>

    
    <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=http://knabben.github.io/posts/sawtooth-cheatsheet/&amp;title=Sawtooth%20Cheatsheet" class="linkedin no-underline" aria-label="share on LinkedIn">
      <svg  height="32px"  style="enable-background:new 0 0 65 65;" version="1.1" viewBox="0 0 65 65" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <path d="M50.837,48.137V36.425c0-6.275-3.35-9.195-7.816-9.195  c-3.604,0-5.219,1.983-6.119,3.374V27.71h-6.79c0.09,1.917,0,20.427,0,20.427h6.79V36.729c0-0.609,0.044-1.219,0.224-1.655  c0.49-1.22,1.607-2.483,3.482-2.483c2.458,0,3.44,1.873,3.44,4.618v10.929H50.837z M22.959,24.922c2.367,0,3.842-1.57,3.842-3.531  c-0.044-2.003-1.475-3.528-3.797-3.528s-3.841,1.524-3.841,3.528c0,1.961,1.474,3.531,3.753,3.531H22.959z M34,64  C17.432,64,4,50.568,4,34C4,17.431,17.432,4,34,4s30,13.431,30,30C64,50.568,50.568,64,34,64z M26.354,48.137V27.71h-6.789v20.427  H26.354z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>

    </a>
  </div>

      <h1 class="f1 athelas mt3 mb1">Sawtooth Cheatsheet</h1>
      
      
      <time class="f6 mv4 dib tracked" datetime="2019-12-15T00:00:00Z">December 15, 2019</time>

      
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l">
<h4 id="headline-1">
Installation
</h4>
<h5 id="headline-2">
Ubuntu
</h5>
<p>
 For local ubuntu Installation is being used Ubuntu Xenial - 16.04 LTS, via vagrant
</p>
<p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ vagrant init ubuntu/xenial64
$ vagrant up</code></pre></div>
</p>
<p>
 After the box is up we need to add the correct repository:
</p>
<p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv-keys 8AA7AF1F1091A5FD
$ sudo add-apt-repository <span style="color:#e6db74">&#39;deb http://repo.sawtooth.me/ubuntu/1.0/stable xenial universe&#39;</span>
$ sudo apt update</code></pre></div>
</p>
<p>
 Install the package:
</p>
<p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ sudo apt install -y sawtooth</code></pre></div>
</p>
<h5 id="headline-3">
Docker
</h5>
<p>
 Install Docker adding key and repo:
</p>
<p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -
$ sudo add-apt-repository <span style="color:#e6db74">&#34;deb [arch=amd64] https://download.docker.com/linux/ubuntu </span><span style="color:#66d9ef">$(</span>lsb_release -cs<span style="color:#66d9ef">)</span><span style="color:#e6db74"> stable&#34;</span>
$ sudo apt update
$ sudo apt install -y docker-ce docker-compose</code></pre></div>
</p>
<h4 id="headline-4">
Starting components services
</h4>
<h5 id="headline-5">
Ubuntu
</h5>
<p>
 Systemd is the default init system for many Linux distributions, init system is also used to manage serviecs and daemons 
 for the server at any point while the system is running.
</p>
<p>
 Targets on systemd are called units, resourcers that systemd knows how to manage. Units are categorized by the type of 
 resource they represent and they are defined with files know as unit files. To list all Units files inside the system use:
</p>
<p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">sudo systemctl list-unit-files | grep sawtooth</code></pre></div>
</p>
<p>
 To fetch the ones running
</p>
<p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">sudo systemctl list-unit</code></pre></div>
</p>
<p>
 By default they are not enabled or started by default, to start a the <strong>Sawtooth validator</strong> service:
</p>
<p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ sudo systemctl start sawtooth-validator.service</code></pre></div>
</p>
<p>
 To stop the Sawtooth Validator use:
</p>
<p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ sudo systemtl stop sawtooth-validator.service</code></pre></div>
</p>
<p>
 To start the service use enable/disable, same works for reload/restart
</p>
<p>
 Finally to check the status:
</p>
<p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ systemctl status sawtooth-validator.service</code></pre></div>
</p>
<h5 id="headline-6">
Docker
</h5>
<p>
 Pieces can be found in docker-compose file.
</p>
<p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">https://sawtooth.hyperledger.org/docs/core/releases/1.0/app_developers_guide/sawtooth-default.yaml</code></pre></div>
</p>
<p>
 The images that follows are:
</p>
<p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">hyperledger/sawtooth-settings-tp:1.0
hyperledger/sawtooth-intkey-tp-python:1.0
hyperledger/sawtooth-xo-tp-python:1.0
hyperledger/sawtooth-validator:1.0

with the command:

 sawadm keygen <span style="color:#f92672">&amp;&amp;</span> <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>        sawtooth keygen my_key <span style="color:#f92672">&amp;&amp;</span> <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>        sawset genesis -k /root/.sawtooth/keys/my_key.priv <span style="color:#f92672">&amp;&amp;</span> <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>        sawadm genesis config-genesis.batch <span style="color:#f92672">&amp;&amp;</span> <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>        sawtooth-validator -vv <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>          --endpoint tcp://validator:8800 <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>          --bind component:tcp://eth0:4004 <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>          --bind network:tcp://eth0:8800 <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>
hyperledger/sawtooth-rest-api:1.0
hyperledger/sawtooth-all:1.0</code></pre></div>
</p>
<h4 id="headline-7">
Generate keys
</h4>
<h5 id="headline-8">
Validator keys
</h5>
<p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ sawadm keygen 
/etc/validator/keys/validator.pub
/etc/validator/keys/validator.priv</code></pre></div>
</p>
<h5 id="headline-9">
User keys
</h5>
<p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ sawtooth keygen
~/.sawtooth/keys/</code></pre></div>
</p>
<h4 id="headline-10">
Create a genesis block
</h4>
<p>
 Create the genesis blocks
</p>
<p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ sawset genesis -k /root/.sawtooth/my_priv.key
config-genesis.batch

$ sawadm genesis config-gensis.batch
/var/lib/sawtooth/genesis.batch</code></pre></div>
</p>
<h4 id="headline-11">
Register a validator
</h4>
<p>
 After creating the genesis.batch:
</p>
<p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ systemctl start sawtooth-validator.services</code></pre></div>
</p>
<h4 id="headline-12">
Verify installation and fix problems
</h4>
<p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">/etc/default/sawtooth-validator

journalctl -u sawtooth-settings-tp -u sawtooth-validator

 $ journalctl -u sawtooth-validator

genesis<span style="color:#f92672">]</span> genesis_batch_file: /var/lib/sawtooth/genesis.batch
genesis<span style="color:#f92672">]</span> block_chain_id: not yet specified
genesis<span style="color:#f92672">]</span> Producing genesis block from /var/lib/sawtooth/genesis.batch
genesis<span style="color:#f92672">]</span> Adding <span style="color:#ae81ff">1</span> batches
executor<span style="color:#f92672">]</span> no transaction processors registered <span style="color:#66d9ef">for</span> processor type sawtooth_settings: 1.0
executor<span style="color:#f92672">]</span> Waiting <span style="color:#66d9ef">for</span> transaction processor <span style="color:#f92672">(</span>sawtooth_settings, 1.0<span style="color:#f92672">)</span>

/etc/default/sawtooth-validator</code></pre></div>
</p>
<h4 id="headline-13">
Connect TP to a validator
</h4>
<p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ systemctl start sawtooth-settings-tp.services
processor_handlers<span style="color:#f92672">]</span> registered transaction processor: connection_id<span style="color:#f92672">=</span>1, family<span style="color:#f92672">=</span>sawtooth_settings, version<span style="color:#f92672">=</span>1.0, namespaces<span style="color:#f92672">=[</span><span style="color:#e6db74">&#39;000000&#39;</span><span style="color:#f92672">]</span></code></pre></div>
</p>
<h4 id="headline-14">
Verify system meets hardware, requirements
</h4>
<p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">ps
top</code></pre></div>
</p>
<h3 id="headline-15">
Configuration
</h3>
<h4 id="headline-16">
Configure validator peering and network
</h4>
<p>
 –peers tcp://127.0.0.1:8800 for static and –seeds for dynamic
</p>
<h4 id="headline-17">
Configure consensus (?)
</h4>
<p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">For PoET 

sawset proposal create -k /etc/sawtooth/keys/validator.priv <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>sawtooth.consensus.algorithm<span style="color:#f92672">=</span>poet <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>sawtooth.poet.report_public_key_pem<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#66d9ef">$(</span>cat /etc/sawtooth/ias_rk_pub.pem<span style="color:#66d9ef">)</span><span style="color:#e6db74">&#34;</span> <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>sawtooth.poet.valid_enclave_measurements<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>poet enclave --enclave-module sgx measurement<span style="color:#66d9ef">)</span> <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>sawtooth.poet.valid_enclave_basenames<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>poet enclave --enclave-module sgx basename<span style="color:#66d9ef">)</span> <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>sawtooth.poet.enclave_module_name<span style="color:#f92672">=</span>sawtooth_poet_sgx.poet_enclave_sgx.poet_enclave <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>-o config.batch</code></pre></div>
</p>
<h4 id="headline-18">
Configure logging
</h4>
<p>
 Can be found in: /etc/sawtooth/log_config
</p>
<h4 id="headline-19">
Configure REST API
</h4>
<p>
 Starting the REST API can be made via Ubuntu systemd scripts or by hand
</p>
<p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ sudo systemctl start sawtooth-rest-api.service</code></pre></div>
</p>
<p>
 Configuration for the service is made at /etc/default/sawtooth-rest-api
 To set another port of validator node set –conect tcp://localhost:4004
</p>
<h4 id="headline-20">
Configure L3 network ports/firewall
</h4>
<p>
 iptables 
</p>
<h4 id="headline-21">
Configure metrics
</h4>
<p>
 Setup InfluxDb - <a href="https://knabben.github.io/posts/sawtooth-grafana/">https://knabben.github.io/posts/sawtooth-grafana/</a>
</p>
<h4 id="headline-22">
Configure transaction processor endpoint
</h4>
<p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">In the TP to connect use: -C tcp://localhost:4004
In the validator-process set: --bind component:tcp://127.0.0.1:4004</code></pre></div>
</p>
<h4 id="headline-23">
Configure systemd services
</h4>
<p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">Systemd services setup</code></pre></div>
</p>
<h4 id="headline-24">
Choose parallel/sync scheduler
</h4>
<p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">sudo -u sawtooth sawtooth-validator -vv --scheduler parallel <span style="color:#f92672">||</span> serial</code></pre></div>
</p>
<h4 id="headline-25">
Configure storage paths
</h4>
<p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">/etc/sawtooth/path.toml

  key_dir
  data_dir
  log_dir
  policy_dir</code></pre></div>
</p>
<h4 id="headline-26">
Configure sawtooth cli
</h4>
<p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">/etc/sawtooth/cli.toml</code></pre></div>
</p>
<h3 id="headline-27">
Lifecycle
</h3>
<h4 id="headline-28">
Create new network
</h4>
<p>
start the validators using Peering static or dynamic, with the first node with genesis block.
</p>
<h4 id="headline-29">
Joining an existing network
</h4>
<p>
set –peers on all nodes
</p>
<h4 id="headline-30">
Remove validator node from the network
</h4>
<p>
remove –peers value from the nodes, and turn the daemon off
</p>
<h4 id="headline-31">
Rejoin network after network failure
</h4>
<p>
restart the sawtooth-validator
</p>
<h4 id="headline-32">
Changing consensus mode
</h4>
<p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">sawset proposal create -k /etc/sawtooth/keys/validator.priv sawtooth.consensus.algorithm<span style="color:#f92672">=</span>dev</code></pre></div>
</p>
<h4 id="headline-33">
Restart validator after crash or maintenance
</h4>
<p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">sudo systemctl restart sawtooth-validator</code></pre></div>
</p>
<h4 id="headline-34">
Restart component after crash or maintenance
</h4>
<p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">sudo systemctl restart sawtooth-rest-api
sudo systemctl restart sawtooth-settings-tp</code></pre></div>
</p>
<h4 id="headline-35">
Add new transaction processor
</h4>
<p>
 Set transaction processor connection to validator 4004 connect
</p>
<h4 id="headline-36">
Change network configuration
</h4>
<p>
 Edit configuration on /etc/sawtooth/validators.toml
</p>
<h4 id="headline-37">
Update sawtooth software
</h4>
<p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">sudo apt-get upgrade</code></pre></div>
</p>
<h4 id="headline-38">
Update transaction processor version
</h4>
<p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">sudo apt-get install sawtooth*</code></pre></div>
</p>
<h3 id="headline-39">
Permissioning, Identity Management and Security
</h3>
<h4 id="headline-40">
Identify network ID / system / peer ID
</h4>
<p>
 cat /etc/sawtooth/keys/validator.pub
</p>
<h4 id="headline-41">
Permission a transaction processor
</h4>
<p>
https://knabben.github.io/posts/sawtooth-permission/
</p>
<p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ sawtooth-identity</code></pre></div>
</p>
<h4 id="headline-42">
Policy management
</h4>
<p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ sawtooth identity policy create policy <span style="color:#e6db74">&#34;DENY_KEY *&#34;</span></code></pre></div>
</p>
<h4 id="headline-43">
Validator registration
</h4>
<p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ sawset proposal create sawtooth.identity.allowed_keys</code></pre></div>
</p>
<h4 id="headline-44">
System permissions
</h4>
<p>
Network identity 
</p>
<h4 id="headline-45">
Configure validator local policy file
</h4>
<p>
On policy_dir must create the correct policy_name file.
</p>
<h4 id="headline-46">
Validator key permission
</h4>
<p>
Trust and challenge authorization types.
</p>
<h4 id="headline-47">
Role management: transactor roles
</h4>
<p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">sawtooth identity role transactor policy_name</code></pre></div>
</p>
<h4 id="headline-48">
Role management: network roles
</h4>
<p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">sawtooth identity role network policy_name</code></pre></div>
</p>
<h4 id="headline-49">
Configure transactor permissions
</h4>
<p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">/etc/sawtooth/validator.toml - <span style="color:#66d9ef">for</span> off-chain use the configuration file:

<span style="color:#f92672">[</span>permissions<span style="color:#f92672">]</span> ROLE <span style="color:#f92672">=</span> POLICY_NAME
policy_dir - policy_name</code></pre></div>
</p>
<h4 id="headline-50">
Secure connections between components/validators
</h4>
<h4 id="headline-51">
Use a proxy server to authorize the REST API
</h4>
<p>
 Apache and Nginx
</p>
<h4 id="headline-52">
Manage validator keys and secrets
</h4>
<p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ sawset proposal create sawtooth.identity.allowed_keys<span style="color:#f92672">=</span>xxx</code></pre></div>
</p>
<h3 id="headline-53">
Listening 
</h3>
<p>

<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe src="https://www.youtube.com/embed/TMLed7lL5CU" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video"></iframe>
</div>

</p>
<ul class="pa0">
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l">




</aside>

  </article>

    </main>
    <script type="text/javascript" async
        src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
 MathJax.Hub.Config({
   tex2jax: {
     inlineMath: [['$','$'], ['\\(','\\)']],
     displayMath: [['$$','$$']],
     processEscapes: true,
     processEnvironments: true,
     skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
     TeX: { equationNumbers: { autoNumber: "AMS" },
            extensions: ["AMSmath.js", "AMSsymbols.js"] }
   }
 });
 MathJax.Hub.Queue(function() {
   
   
   
   var all = MathJax.Hub.getAllJax(), i;
   for(i = 0; i < all.length; i += 1) {
     all[i].SourceElement().parentNode.className += ' has-jax';
   }
 });

 MathJax.Hub.Config({
   
   TeX: { equationNumbers: { autoNumber: "AMS" } }
 });
</script>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-46699622-2', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


<footer class="bg-near-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="http://knabben.github.io/" >
    &copy; 2020 AK
  </a>
    <div>













</div>
  </div>
</footer>

    

  <script src="/dist/js/app.3fc0f988d21662902933.js"></script>


  </body>
</html>
